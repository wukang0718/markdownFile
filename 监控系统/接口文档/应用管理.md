

## 应用管理

### 相关说明

#### BASE_CODE

1000

### 返回值说明

| 参数    | 类型   | 说明                                                    |
| ------- | ------ | ------------------------------------------------------- |
| code    | number | 200表示成功，其他表示错误，格式 `${BASE_CODE}${错误码}` |
| data    | any    | 返回的数据                                              |
| message | string | 请求的状态信息的描述                                    |

### 添加应用

#### 接口地址

```bash
/monitor/app
```

#### 请求方式

```bash
POST
```

#### 请求参数

##### Body

| 参数    | 类型   | 是否必传 | 说明              |
| ------- | ------ | -------- | ----------------- |
| appName | string | 是       | 系统名称          |
| webhook | string | 是       | 飞书机器人webhook |
| sign    | string | 是       | 飞书机器人sign    |

```bash
{
  "appName": "系统名称",
  "webhook": "https://open.feishu.cn/open-apis/bot/v2/hook/dc494c85-****",
  "sign": "aHOS6PU56G8****"
}
```

#### 接口返回

```json
{
     "code": 200,
     "data": "uuid",
     "message": ""
}
```

#### 错误码

| code | message  |
| ---- | -------- |
| 0001 | 添加失败 |

### 修改应用

#### 接口地址

```bash
/monitor/app/:appId
```

#### 请求方式

```bash
PUT
```

#### 请求参数

##### Param

| 参数  | 类型   | 是否必传 | 说明          |
| ----- | ------ | -------- | ------------- |
| appId | string | 是       | 要修改的appid |

##### Body

| 参数    | 类型   | 是否必传 | 说明              |
| ------- | ------ | -------- | ----------------- |
| appName | string | 是       | 系统名称          |
| webhook | string | 是       | 飞书机器人webhook |
| sign    | string | 是       | 飞书机器人sign    |

```json
{
	appName: '系统名称',
  "webhook": "https://open.feishu.cn/open-apis/bot/v2/hook/dc494c85-****",
  "sign": "aHOS6PU56G8****"
}
```

#### 接口返回

```json
{
		"code": 200,
		"data": "uuid",
  	"message": ""
}
```

#### 错误码

| 错误码 | 说明     |
| ------ | -------- |
| 0002   | 修改失败 |

### 分页查询应用

#### 接口地址

```bash
/monitor/app/list
```

#### 请求方式

```bash
GET
```

#### 请求参数

##### Query

| 参数     | 类型   | 是否必传 | 说明           |
| -------- | ------ | -------- | -------------- |
| pageNo   | number | 是       | 当前查询的页数 |
| pageSize | number | 是       | 每页显示的条数 |
| appName  | string | 否       | 应用名称       |

```bash
/monitor/app/list?pageNo=1&pageSize=10&appName=系统应用
```

#### 接口返回

```json
{
	"code": 200,
  "data": {
    "pageNo": 1,
    "pageSize": 10,
    "data": [
      {
        "appId": 'uuid',
        "appName": '系统应用',
        "webhook": "https://open.feishu.cn/open-apis/bot/v2/hook/dc494c85-****",
        "enable": true
      }
    ]
  },
  "message": ""
}
```

#### 错误码

| 错误码 | 说明     |
| ------ | -------- |
| 0004   | 查询失败 |

### 启停应用

#### 接口地址

```bash
/monitor/app/enable/:appId
```

#### 请求方式

```bash
PUT
```

#### 请求参数

##### Param

| 参数  | 类型   | 是否必传 | 说明              |
| ----- | ------ | -------- | ----------------- |
| appId | string | 是       | 要启停的应用appId |

##### Body

| 参数   | 类型    | 是否必传 | 说明                         |
| ------ | ------- | -------- | ---------------------------- |
| enable | boolean | 是       | `true` 为启用，`false`为停用 |

```json
{
  "enable": false
}
```

#### 返回结果

```json
{
  "code": 200,
  "data": null,
  "message": ""
}
```

#### 错误码

| 错误码 | 说明            |
| ------ | --------------- |
| 0005   | 应用appId不存在 |
| 0006   | 启停失败        |

### 测试机器人

#### 接口地址

```bash
/monitor/app/send-message/:appId
```

#### 请求方式

```bash
POST
```

#### 请求参数

##### Param

| 参数  | 类型   | 是否必传 | 说明                |
| ----- | ------ | -------- | ------------------- |
| appId | string | 是       | 要测试的系统的appId |

#### 接口返回

```json
{
  "code": 200,
  "data": null,
  "message": ""
}
```

#### 错误码

| 错误码 | 说明            |
| ------ | --------------- |
| 0007   | 应用appId不存在 |
| 0008   | 发送失败        |

### 删除系统

#### 接口地址

```bash
/monitor/app/:appId
```

#### 请求方式

```bash
DELETE
```

#### 请求参数

##### Param

| 参数  | 类型   | 是否必传 | 说明              |
| ----- | ------ | -------- | ----------------- |
| appId | string | 是       | 要删除的应用appId |

#### 接口返回

```json
{
  "code": 200,
  "data": null,
  "message": ""
}
```

#### 错误码

| 错误码 | 说明            |
| ------ | --------------- |
| 0009   | 应用appId不存在 |
| 0010   | 删除失败        |

### 查询应用详情

#### 接口地址

```bash
/monitor/app/:appId
```

#### 请求方式

```bash
GET
```

#### 请求参数

##### Params

| 参数  | 类型   | 是否必传 | 说明        |
| ----- | ------ | -------- | ----------- |
| appId | string | 是       | 应用的appId |

#### 接口返回

```json
{
	"code": 200,
  "data": {
    "appId": 'uuid',
    "appName": '系统应用',
    "webhook": "https://open.feishu.cn/open-apis/bot/v2/hook/dc494c85-****",
    "enable": true,
    "sign": "xxxxx"
  },
  "message": ""
}
```

#### 错误码

| 错误码 | 说明     |
| ------ | -------- |
| 0011   | 查询失败 |

